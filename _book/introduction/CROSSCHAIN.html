
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Cross-Chain · TradeLayer Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Patrick Dugan">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tabs/bootstrap.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/custom.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../protocol/OP_RETURN_LAYER.html" />
    
    
    <link rel="prev" href="VISION.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="OVERVIEW.html">
            
                <a href="OVERVIEW.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="VISION.html">
            
                <a href="VISION.html">
            
                    
                    Vision
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="CROSSCHAIN.html">
            
                <a href="CROSSCHAIN.html">
            
                    
                    Cross-Chain
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Protocol</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../protocol/OP_RETURN_LAYER.html">
            
                <a href="../protocol/OP_RETURN_LAYER.html">
            
                    
                    OP_Return Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../protocol/TRADE_TYPES.html">
            
                <a href="../protocol/TRADE_TYPES.html">
            
                    
                    Trade Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../protocol/LAYER_2.html">
            
                <a href="../protocol/LAYER_2.html">
            
                    
                    Layer 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../protocol/DERIVATIVES.html">
            
                <a href="../protocol/DERIVATIVES.html">
            
                    
                    Derivatives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../protocol/INSURANCE.html">
            
                <a href="../protocol/INSURANCE.html">
            
                    
                    Insurance and Liquidation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../protocol/FEE.html">
            
                <a href="../protocol/FEE.html">
            
                    
                    Fees
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../protocol/TOKENOMICS.html">
            
                <a href="../protocol/TOKENOMICS.html">
            
                    
                    Vesting and Tokenomics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../protocol/MACRO.html">
            
                <a href="../protocol/MACRO.html">
            
                    
                    Macro-economics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../protocol/COMPLIANCE.html">
            
                <a href="../protocol/COMPLIANCE.html">
            
                    
                    Compliance
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">API Reference</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../api_reference/TRANSACTIONS.html">
            
                <a href="../api_reference/TRANSACTIONS.html">
            
                    
                    TradeLayer Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../api_reference/API.html">
            
                <a href="../api_reference/API.html">
            
                    
                    Orderbook Service API Package
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../api_reference/WALLET.html">
            
                <a href="../api_reference/WALLET.html">
            
                    
                    Wallet Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../api_reference/ENDPOINTS.html">
            
                <a href="../api_reference/ENDPOINTS.html">
            
                    
                    TradeLayer Endpoints
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Cross-Chain</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="tradelayer-cross">TradeLayer Cross</h3>
<p><strong>TradeLayer Cross</strong></p>

<p>Utilizing the power of Chain Signatures on NEAR, it’s possible to do a number of interesting things with UTXOs and token transactions on TradeLayer, one of these is enabling cross-chain swaps. Because TradeLayer runs off of synced nodes for Proof of Work blockchains, it would be possible to have native cross-chain swaps if running full Bitcoin, Litecoin and Dogecoin nodes were required, because this is prohibitively memory intensive there’s a simpler solution: NEAR smart contracts that bind Send and Transfer transactions on both chains. This enables easy transfer of similar assets between chains.</p>

<h2 id="cross-chain-swaps">Cross-Chain Swaps</h2>

<p>A NEAR smart contract participant binds an amount of USDC on NEAR or NEAR native currency, a multisig address is created with a key from the user sending on e.g. Litecoin and a key controlled by the Chain Signatures MPC confederation on NEAR, and the sender’s address on the delivery chain, such as Bitcoin, is submitted to the smart contract. A market maker listens for request-for-quotes from that relayer smart contract and responds by creating a channel on e.g. Bitcoin with the MPC confederation holding the second key. Then the user sends their asset on Litecoin to the channel address, the market maker sends their asset on Bitcoin to the other channel address, and the MPC confederation fulfills their bonded pledge by producing and signing the send transactions to the respective delivery addresses on each chain.</p>

<p>It’s possible to do this with Transfer instead of Sends, moving Commited tokens on the L2 between channels across the 3 chains that TradeLayer supports. This makes it possible to have a unified orderbook across all chains and orderbook servers, de-fragmenting liquidity, at a modest routing cost… as long as miner fees are low.</p>

<p>While not available at launch the power to route things across the Proof of Work ecosystem is exciting.</p>

<h2 id="cross-chain-bridging">Cross-chain Bridging</h2>

<p>Back in 2015 USDT was first issued on the OmniLayer protocol, the ancestor of the TradeLayer protocol, using an administrative address where tokens could be minted and redeemed. Using a similar transaction type, it’s possible to manage centralized stablecoin and security tokens on TradeLayer, but what if this could be somewhat decentralized? Using Chain Signatures it’s possible to build cross-chain bridge contracts from NEAR to Litecoin, Bitcoin and Dogecoin, with the redemption of tokens being taken as a proof to unlock the redemption of bridged tokens on the smart contract chain.</p>

<p>While the early stage of TradeLayer’s launch will seek to have native issuance of smaller stablecoin contenders, the bridge application potential means that the wider DeFi galaxy can interact with TradeLayer in the future. To properly have an oracle that can guarantee the redemption of tokens based on valid balances, it will require that the current .js or future Rust implementation of TradeLayer be deployed on NEAR, but it’s a feasible solution when combined with an attestation of code version and tx index state to extrapolate from, with the matching txindex logged on the NEAR DA layer.</p>

<h2 id="utxo-amm">UTXO AMM</h2>

<p>Millions have been spent and the best minds in Bitcoin have wept over the challenge of doing more with raw BTC UTXOs without compromising the underlying Bitcoin protocol with a risky new hard fork. BitVM, Stacks and Botanix-like multisig models, ZK proofs of chain headers, Lightning Network virtual private channel factories and nested Taproot DLC contracts have all been tried, but since they’re navigating around a rigid structure they run into contortions, high costs and limited modularity. With Chain abstraction, it’s in theory possible to have TradeLayer’s synthetic model be automated with smart contracts that sign off on trades in an automated-market-maker, keeping a price near 1:1 for LTC to sLTC and so forth. AMMs like Curve that are providing raw liquidity on things like USDT/USDC, taking only credit and liquidity risk in the underlying instruments, the same idea applies for LTC/sLTC or BTC/sBTC market making. The challenge is in bringing the state of TradeLayer token balances to the smart contract environment.</p>

<h2 id="virtualizing-pow-chains-in-wasm">Virtualizing PoW Chains in WASM</h2>

<p>The ZeroSync project shows a promising way of using ZK proofs to verify block headers and getting the last mile with cheaper-to-compute Merkel proofs such as UTreeXO, but the complications of ZK proving Scrypt leave the Chain Signature model on NEAR as an easier way to virtualize chain-state and make TradeLayer provably interactive with smart contracts. NEAR also brings advantages in having a very cost efficient Data Availability service and reasonable gas costs.</p>

<p>In order to make all of the above possible, the roadmap involves modifying Aurora’s Bitcoin Light Client relayer app for NEAR to Litecoin, integrating that with our wallet, but what about chain state? NEAR's low-cost DA layer means we can actually store all the block data from some epoch and possibly truncate the epoch to 100k or 500k blocks with periodic checkpoint hashes that are reproducible. Then a full Rust implementation of TradeLayer will parse that data and reproduce the tally map of token balances, enabling verification of trades, bridging and cross-chain swaps.</p>

<p>An intermediate solution involves using a tx type in TradeLayer that colors an output and traces it, enabling sends and spot trades in channels to be traced as a merkle branch. This allows for some bridging of NEAR or USDT and wrapped LTC for sends and spot trading only (but not as contract collateral, which has multi-lateral settlement). It's imperfect but easier to implement than a full port of TradeLayer to NEAR and thus closer on the roadmap.</p>

<p>The absolute simplest NEAR app on the roadmap will be a clearlisted market maker where one can run automated trading on a server and the MPC contract on NEAR will only approve trades to approved counterparty addresses and sends to a more limited list of user-controlled addresses. Updating the clearlist will involve some time-lags and email alerts and can be ameliorated in case of compromise of the NEAR wallet controlling the updater oracle address. This is similar to how centralized exchanges do withdrawal address clearlisting. It enables automated market making in an API sense to be done with Virtual Private Servers without untenable operational risk for storing trading inventory on a hot key.</p>

<p>While baseline protocol fees in TradeLayer are very low, there may be some additional fee routed as UTXO to addresses linked to smart contracts to compensate stakers for running this service and offset the cost of gas in virtualizing contracts. With current Litecoin activity and NEAR prices the cost of fully virtualizing the whole chain would be about $700-800 USD a year, with full blocks and higher NEAR prices the cost could balloon to 15k-50k a year, but the added fee shouldn’t need to be much higher than $1 per transaction as these scale together.</p>

<p><em>Last updated: [11<em>5</em>2024]</em></p>


                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="VISION.html" class="navigation navigation-prev " aria-label="Previous page: Vision">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../protocol/OP_RETURN_LAYER.html" class="navigation navigation-next " aria-label="Next page: OP_Return Layer">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Cross-Chain","level":"1.4","depth":1,"next":{"title":"OP_Return Layer","level":"2.1","depth":1,"path":"protocol/OP_RETURN_LAYER.md","ref":"protocol/OP_RETURN_LAYER.md","articles":[]},"previous":{"title":"Vision","level":"1.3","depth":1,"path":"introduction/VISION.md","ref":"introduction/VISION.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","tabs","highlight","sharing","fontsettings","theme-default"],"styles":{"website":"styles/custom.css"},"pluginsConfig":{"search-pro":{"cutWordLib":"nodejieba","defineWord":[]},"tabs":{},"highlight":{},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"fontsettings":{"family":"sans","size":2,"theme":"white"},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}}},"theme":"default","author":"Patrick Dugan","engines":{"gitbook":"3.2.3"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"TradeLayer Documentation","gitbook":"*","description":"Comprehensive guide to TradeLayer Protocol."},"file":{"path":"introduction/CROSSCHAIN.md","mtime":"2024-10-09T13:38:43.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-10-10T17:52:59.987Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-tabs/bootstrap.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

